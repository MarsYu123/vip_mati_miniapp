# 马蹄网项目

# 重大问题！
## v2.7
由于腾讯与苹果的神仙打架问题，腾讯全面关闭了小程序于ios端的任何虚拟物品交易权利。也就是说，从ios端的小程序，支付任何虚拟交易，如：``会员``,``线上课程``,``特权``等等没有实物的产品。
所以紧急修改了ios端的所有交易功能：
根据设备判断，如果是iphone则关闭所有交易接口。所有交易按钮修改为查看更多，点击进入客服。



## v2.6
改版学习卡小程序
增加了vip购买，视频购买，马蹄网购买的功能

## v2.5
增加一个试听券小功能：
根据用户信息判断是否显示试听券界面
试听券仅作为数据展示

## v2.4
增加往期课程
增加单次购买课程
增加课程上线状态

## v2.3
客服问题通过第三方解决。

## v2.2
遇到一个关于客服的新问题。  
如果客服使用微信官方提供，只能在pc登录，并且没有新信息提示。而且自动回复只能回复文字，正在考虑是否使用第三方平台。不过这个问题和代码也没什么太大关系。v2.2基本修复了已知的一些逻辑问题。准备上线！
## v2.1
将文档内修改调整完毕，十分惊讶的时，竟然没有出现什么大bug。只有一些文案以及界面还有数据的修改。总的来说，这次项目进行的十分顺利，超过了我预期的速度。

## v2.0功能完成：
   
> 1. 登录、绑定、注册、修改资料
> 1. 购买学员卡（调用微信支付接口）
> 1. 客服
> 1. 课程展示 
> 1. 课程兑换
>      1. 自己兑换
>     1. 赠送兑换
> 1. 订单处理、发票管理
> 1. 分享(仅分享首页)

## 解决问题：
目前使用模板解决登陆问题，将所有登陆功能：获取权限，发送code获取openid，通过openid查询用户信息等。写在一个模块。
通过需求场景调用模块来解决。


## 存在问题：
~~目前发现登录模块现在是最棘手的问题。由于微信登录授权在未删除小程序数据的情况只有一次，并且授权是异步操作。本小程序需要绑定账户，所以就必须在先拿到``授权信息``，然后再拿到``openid``，然后传给后台获取用户资料。所以把方法目前全部引用在``index.js``中。所以对以后扩展来说有很大问题。  
我以前从没没有想到在小程序中，``app.js``执行速度竟然没有``index.js``来得快。看来``app.js``只能算是存储全局变量的容器，并不是第一个加载的。  
从这里得到的教训是，以后所有需要开始就加载进来的，写在模板中，然后根据情况引用在页面的``Onload:{}``中。这样应该是最稳妥的。~~
## v1.0
完成了基本的项目搭建，功能流程存在较大缺陷，有待完善
## v1.0功能：
> 1. 登录、绑定、注册、修改资料
> 1. 购买学员卡（调用微信支付接口）
> 1. 客服
> 1. 课程展示 
> 1. 课程兑换
> 1. 分享(仅分享首页)